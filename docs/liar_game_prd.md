# 라이어 게임 온라인
## Product Requirement Document (PRD)

**버전 1.0 | 2025년 10월**

---

## 문서 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | 라이어 게임 온라인 (가칭) |
| **문서 버전** | 1.0 |
| **작성일** | 2025년 10월 10일 |
| **최종 수정일** | 2025년 10월 11일 |
| **대상 플랫폼** | 웹 브라우저 (PC/Mobile 반응형) |

---

## 1. Executive Summary

### 1.1 제품 개요

라이어 게임 온라인은 웹 브라우저에서 즉시 플레이 가능한 소셜 추리 파티 게임입니다. 다운로드 없이 URL 링크만으로 4-10명이 함께 즐길 수 있으며, 텍스트와 음성 채팅을 활용한 하이브리드 커뮤니케이션을 제공합니다.

### 1.2 핵심 가치 제안

1. **제로 프릭션 진입**: 앱 다운로드 없이 URL로 3초 만에 게임 시작
2. **하이브리드 커뮤니케이션**: 텍스트 + 선택적 음성 채팅 지원
3. **크로스 플랫폼**: PC와 모바일에서 동시 플레이 가능
4. **낮은 학습 곡선**: 2분 튜토리얼 후 즉시 플레이 가능
5. **건전한 수익화**: P2W 없는 코스메틱 중심 모델

### 1.3 타겟 시장 및 사용자

- **주요 타겟**: 점심시간 게이머 (직장인 24-35세), 스트리머 (20-30대), 학생 게이머 (15-22세)
- **시장 규모**: 글로벌 소셜 디덕션 게임 시장 $1.62B (2024) → $3.61B (2033), CAGR 9.3%
- **지역**: 1차 한국, 2차 글로벌 확장 (영어권, 일본, 중국)

### 1.4 성공 지표 (12개월)

| 지표 | 목표 |
|------|------|
| **DAU (일일 활성 사용자)** | 50,000명 |
| **D7 리텐션** | 12% |
| **월 매출** | $75,000 |
| **ARPU** | $1.50 |

---

## 2. 게임 핵심 메커니즘

### 2.1 게임 룰

#### 역할

- **시민**: 공통 제시어를 받으며, 토론을 통해 라이어를 찾아내는 것이 목표
- **라이어**: 제시어를 모르며, 정체를 숨기고 시민인 척 연기하는 것이 목표

#### 게임 플로우

```
역할 배정 (10초) → 토론 페이즈 (3분) → 투표 페이즈 (1분) → 
결과 발표 (30초) → 3라운드 반복 → 최종 결과
```

#### 승리 조건 및 득점

| 상황 | 시민 점수 | 라이어 점수 |
|------|----------|------------|
| 라이어 찾기 성공 + 제시어 실패 | +1점 | 0점 |
| 라이어 찾기 성공 + 제시어 성공 | 0점 | +3점 |
| 라이어 찾기 실패 | 0점 | +2점 |

### 2.2 게임 모드

#### Phase 1 (MVP)

- **클래식 모드**: 표준 룰, 3라운드
- **빠른 게임**: 토론 시간 단축, 1라운드만
- **커스텀 게임**: 방장이 규칙 자유 설정

#### Phase 2+ (추가 모드)

- **랭크 게임**: MMR 기반 경쟁 매칭
- **팀 배틀**: 2팀으로 나뉘어 대결
- **토너먼트**: 16명 브래킷 토너먼트
- **카오스 모드**: 무작위 특수 규칙
- **데일리 챌린지**: 일일 특별 과제

---

## 3. 기능 요구사항 (Functional Requirements)

### 3.1 방 생성 및 관리 (FR-001)

1. 시스템은 6자리 고유 방 코드(예: ABC123)를 자동 생성해야 함
2. 공유 가능한 URL 링크 및 QR 코드 제공
3. 방장은 게임 설정(인원, 라운드 수, 시간)을 커스터마이즈 가능
4. 공개/비공개 방 설정 옵션
5. 방장의 강제 퇴장 권한

### 3.2 방 참여 (FR-002)

1. 사용자는 코드 입력, URL 클릭, QR 스캔으로 방 입장 가능
2. 빠른 매칭 시스템으로 자동 매칭 지원
3. 입장 시 닉네임 설정 (최소 2자, 최대 12자)
4. 방 입장 전 대기실에서 준비 상태 확인

### 3.3 실시간 채팅 시스템 (FR-003)

1. Socket.IO 기반 실시간 텍스트 채팅
2. 욕설 및 비속어 자동 필터링 (한국어, 영어)
3. 이모티콘 및 스티커 지원
4. 채팅 히스토리 저장 (게임 세션 중)
5. 특정 사용자 뮤트 기능

### 3.4 음성 채팅 시스템 (FR-004)

1. WebRTC P2P 기반 실시간 음성 통신
2. Opus 코덱으로 32kbps 압축
3. 발언 중인 사용자 시각적 표시
4. 음성 On/Off 토글 버튼
5. STUN/TURN 서버 Fallback (연결 실패 시)

### 3.5 사용자 프로필 및 전적 (FR-005)

1. 레벨 시스템 (경험치 기반)
2. 승률, 플레이 시간, MVP 획득 횟수 표시
3. 역할별 통계 (시민 승률, 라이어 승률)
4. 배지 및 업적 시스템
5. 게임 히스토리 조회 (최근 20게임)

### 3.6 랭킹 시스템 (FR-006)

1. 글로벌 리더보드 (Top 100)
2. 시즌별 랭킹 초기화 (3개월 주기)
3. 친구 랭킹 비교
4. 티어 시스템: 브론즈 → 실버 → 골드 → 플래티넘 → 다이아 → 마스터

### 3.7 친구 시스템 (FR-007)

1. 친구 추가/삭제 (최대 200명)
2. 온라인/오프라인 상태 표시
3. 게임 중인 친구에게 참여 요청
4. 친구 전적 비교 페이지

### 3.8 튜토리얼 (FR-008)

1. 인터랙티브 튜토리얼 (약 2분)
2. 역할 소개, 토론 연습 (AI 상대), 투표 연습
3. 완료 시 보상 (100 코인)
4. 스킵 가능 옵션

---

## 4. 비기능 요구사항 (Non-Functional Requirements)

### 4.1 성능 (NFR-001)

1. 초기 페이지 로딩: 3초 이내 (LCP)
2. WebSocket 메시지 레이턴시: 100ms 이하
3. 동시 접속자: 최소 10,000명 지원
4. 서버 응답 시간: 평균 50ms 이하

### 4.2 확장성 (NFR-002)

1. Kubernetes HPA로 자동 수평 확장
2. Redis 클러스터 샤딩으로 데이터 분산
3. CDN 활용으로 정적 리소스 전송 최적화

### 4.3 가용성 (NFR-003)

1. SLA 99.9% (월 최대 다운타임 43분)
2. 서버 이중화 및 자동 Failover
3. 정기 백업 (일 1회, 주 1회 전체)

### 4.4 보안 (NFR-004)

1. HTTPS 필수 (TLS 1.3)
2. 사용자 입력 Sanitize (XSS 방지)
3. Rate Limiting (API 호출 제한)
4. 개인정보 암호화 저장 (AES-256)
5. 정기 보안 감사 (분기 1회)

### 4.5 접근성 (NFR-005)

1. WCAG 2.1 Level AA 준수
2. 키보드 네비게이션 지원
3. 스크린 리더 호환
4. 색맹 모드 및 고대비 모드
5. 큰 글씨 옵션 (1.5배, 2배)

### 4.6 다국어 지원 (NFR-006)

1. Phase 1: 한국어, 영어
2. Phase 2: 일본어, 중국어 (간체/번체)
3. 브라우저 언어 자동 감지

---

## 5. 사용자 스토리 (User Stories)

### 5.1 직장인 민지 (점심시간 게이머)

1. 점심시간에 동료들과 빠르게 게임을 시작하고 싶어요. 앱 다운로드 없이 링크만으로 바로 플레이하고 싶습니다.
2. 모바일에서도 PC와 동일한 경험을 하고 싶어요.
3. 게임 시간이 15분 이내로 짧게 끝나야 해요.

### 5.2 스트리머 준호 (콘텐츠 크리에이터)

1. 시청자들이 쉽게 참여할 수 있는 링크를 채팅창에 공유하고 싶어요.
2. 게임 중 재미있는 순간을 시청자들과 공유하고 싶어요.
3. 음성 채팅으로 시청자들과 실시간 소통하고 싶습니다.

### 5.3 학생 지훈 (경쟁 게이머)

1. 랭크 모드에서 실력을 인정받고 싶어요.
2. 친구들과 전적을 비교하며 경쟁하고 싶습니다.
3. 무료로 즐기되, 선택적으로 아이템을 구매하고 싶어요.

---

## 6. UI/UX 요구사항

### 6.1 화면 구성

#### 홈 화면

- 방 만들기 (Primary CTA)
- 방 참여하기
- 빠른 매칭
- 내 프로필 (우측 상단)
- 랭킹 / 친구 탭

#### 게임 화면

- 상단: 타이머, 현재 라운드 표시
- 좌측: 플레이어 목록 (아바타, 닉네임, 상태)
- 중앙: 제시어 표시, 채팅 로그
- 하단: 채팅 입력창, 음성 버튼

#### 투표 화면

- 플레이어 카드를 격자 형태로 배치
- 카운트다운 타이머
- 투표 확정 버튼

### 6.2 반응형 디자인

#### 모바일 (320px~)

- 세로 레이아웃
- 터치 최적화 버튼 (최소 44x44px)
- 스와이프 제스처 지원

#### 태블릿 (768px~)

- 2열 레이아웃
- 사이드바 활용

#### 데스크톱 (1024px~)

- 3열 레이아웃
- 키보드 단축키 지원 (Enter: 채팅 전송, Space: 음성 On/Off)

---

## 7. 기술 요구사항

### 7.1 기술 스택

| 레이어 | 기술 |
|--------|------|
| **프론트엔드** | Next.js 15 (SSR/CSR Hybrid) + Socket.IO Client |
| **백엔드** | NestJS 11 + Fastify (WebSocket Gateway) |
| **데이터베이스** | Redis (Cache/Session) + PostgreSQL (Persistent) |
| **인프라** | Kubernetes on Mac mini M4 |
| **실시간 통신** | Socket.IO (텍스트) + WebRTC (음성) |
| **모니터링** | Prometheus + Grafana |

### 7.2 아키텍처 원칙

1. **마이크로서비스 아키텍처**: 게임, 매칭, 사용자, 채팅 모듈 분리
2. **API 우선 설계**: RESTful API + WebSocket Events
3. **상태 관리**: Redis로 Hot Data, PostgreSQL로 Cold Data
4. **캐싱 전략**: L1 (Browser Cache) → L2 (CDN) → L3 (Redis) → DB

### 7.3 데이터베이스 스키마 (핵심 테이블)

#### users 테이블
**id** (UUID), username (VARCHAR), email (VARCHAR), level (INT), created_at (TIMESTAMP)

#### game_history 테이블
**id** (UUID), room_id (VARCHAR), players (JSONB), result (JSONB), created_at (TIMESTAMP)

#### rankings 테이블
**user_id** (UUID), season (INT), rating_points (INT), tier (VARCHAR), PRIMARY KEY (user_id, season)

### 7.4 API 엔드포인트 (주요)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | /api/rooms | 공개 방 리스트 조회 |
| POST | /api/rooms | 방 생성 |
| GET | /api/users/:id | 사용자 프로필 조회 |
| GET | /api/rankings | 랭킹 조회 |

### 7.5 WebSocket Events

#### Client → Server
joinRoom, leaveRoom, chat, vote, guessKeyword

#### Server → Client
playerJoined, gameStart, roleAssigned, turnChange, voteResult, gameEnd

---

## 8. 개발 계획 및 마일스톤

### 8.1 Phase 1: MVP (12주)

1. **Week 1-4**: 기반 구축 (Next.js + NestJS 보일러플레이트, WebSocket 연결, Redis + PostgreSQL 설정, 인증 시스템)
2. **Week 5-8**: 핵심 게임 로직 (방 생성/참여, 게임 로직, 채팅 시스템, 기본 UI)
3. **Week 9-12**: 출시 준비 (튜토리얼, 광고 통합, QA, Kubernetes 배포)

### 8.2 Phase 2: 성장 기능 (8주)

1. **Week 13-16**: 랭크 시스템, 친구 기능, 프로필 페이지, 리더보드
2. **Week 17-20**: 음성 채팅 (WebRTC), 배틀패스 시스템, 추가 게임 모드 2개, 성능 최적화

### 8.3 Phase 3: 고급 기능 (12주)

1. **Week 21-28**: 토너먼트 시스템, 스토리 모드, 고급 통계, IP 콜라보 준비
2. **Week 29-32**: 글로벌 서버 확장, 다국어 지원, 모바일 PWA, 마케팅 캠페인

### 8.4 필요 인력

| 역할 | 인원 |
|------|------|
| **Phase 1 (MVP, 12주)** | 프론트 1명, 백엔드 1명, 게임 디자이너 1명, UI/UX 0.5명, QA 0.5명 |
| **Phase 2-3 (성장, 20주)** | 프론트 2명, 백엔드 2명, 게임 디자이너 1명, UI/UX 1명, DevOps 1명, 커뮤니티 매니저 1명, QA 1명 |
| **총 인력** | **최대 10명** |

---

## 9. 성공 지표 및 KPI

### 9.1 사용자 성장 지표

| 지표 | 3개월 | 12개월 | 24개월 |
|------|-------|--------|--------|
| **DAU** | 7,500 | 50,000 | 150,000 |
| **MAU** | 37,500 | 166,667 | 500,000 |
| **DAU/MAU** | 20% | 30% | 30% |

### 9.2 리텐션 목표

| 기간 | D1 | D7 |
|------|----|----|
| **초기 (3개월)** | 20%+ | 8% |
| **성숙기 (12개월+)** | 25%+ | 12% |

### 9.3 수익 목표

| 지표 | 3개월 | 12개월 | 24개월 |
|------|-------|--------|--------|
| **월 매출** | $10,000 | $75,000 | $300,000 |
| **ARPU** | $0.20 | $1.50 | $1.80 |
| **전환율** | 2% | 5% | 8% |

### 9.4 참여도 지표

- **평균 세션 길이**: 8-12분
- **일일 세션 수**: 3-4회
- **게임 완료율**: 90%+
- **중도 이탈률**: 10% 이하

---

## 10. 리스크 관리

### 10.1 기술적 리스크

| 리스크 | 영향 | 확률 | 대응 방안 |
|--------|------|------|----------|
| WebSocket 서버 부하 | 높음 | 중간 | Redis Pub/Sub, 수평 확장 |
| WebRTC 연결 실패 | 중간 | 높음 | Fallback to 텍스트, TURN 서버 |
| Mac mini 성능 한계 | 높음 | 낮음 | 클라우드 확장 (AWS/GCP) |

### 10.2 비즈니스 리스크

| 리스크 | 영향 | 확률 | 대응 방안 |
|--------|------|------|----------|
| 낮은 초기 유저 확보 | 높음 | 중간 | 인플루언서 마케팅, 바이럴 |
| 경쟁사 웹 버전 출시 | 높음 | 중간 | 빠른 런칭, 차별화 강화 |
| 독성 커뮤니티 | 중간 | 높음 | 적극적 모더레이션, 신고 시스템 |

### 10.3 법적 준수 사항

- **게임물 등급 분류**: 게임물관리위원회 신청 (전체이용가 예상)
- **개인정보 보호법**: 개인정보 처리방침 작성, 14세 미만 법정대리인 동의
- **GDPR 준수**: 유럽 진출 시 GDPR 준수
- **청소년 보호**: 욕설 필터링 강화, 독성 행동 제재

---

## 11. 부록

### 11.1 용어 정의

| 용어 | 정의 |
|------|------|
| **DAU** | Daily Active Users (일일 활성 사용자) |
| **MAU** | Monthly Active Users (월간 활성 사용자) |
| **ARPU** | Average Revenue Per User (유저당 평균 수익) |
| **LTV** | Lifetime Value (고객 생애 가치) |
| **CCU** | Concurrent Users (동시 접속자) |
| **WebRTC** | Web Real-Time Communication (웹 실시간 통신 기술) |
| **SSR** | Server-Side Rendering (서버 사이드 렌더링) |
| **PWA** | Progressive Web App (프로그레시브 웹 앱) |

### 11.2 참조 문서

- 웹 기반 라이어 게임 완전 기획서 v1.0
- 시장 분석 리포트 (2024-2025)
- 기술 스택 평가 문서

### 11.3 문서 이력

| 버전 | 날짜 | 작성자 | 변경 사항 |
|------|------|--------|----------|
| 1.0 | 2025-10-10 | 게임 기획팀 | 최초 작성 |

---

**- 문서 종료 -**
